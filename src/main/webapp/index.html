<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Catch a Ride Go!</title>

	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<style>
      /* Always set the map height explicitly to define the size of the div
      * element that contains the map. */
      #map {
      	height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
      	height: 100%;
      	margin: 0;
      	padding: 0;
      }

      .logo-overlay {
      	position:absolute;
      	top: 30px;
      	left: 5px;
      	background-image: url("images/catch-a-ride.png");
      	height: 60px;
      	width: 468px;
      	z-index: 200;
      }
      .attribution {
      	position: absolute;
      	bottom: 25px;
      	left: 5px;
      	height: 10px;
      	width: 90%;
      	z-index: 200;
      	font-size: 8px;
      }
  </style>
</head>
<body id="container">
	<div class="logo-overlay"></div>
	<div id="map"></div>
	<div class="attribution">Icons made by <a href="http://www.flaticon.com/authors/scott-de-jonge" title="Scott de Jonge">Scott de Jonge</a> from <a href="http://www.flaticon.com" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></div>
	<script>
		var container = document.getElementById("container");
		var myLat=41.340485, myLng=-72.0991807, myAcc;

		function geoError() {
			container.innerHTML = "Geolocation is not supported by this browser.";
		}

		function getLocation() {
			if (navigator.geolocation) {
				navigator.geolocation.watchPosition(showPosition, geoError, geoOptions);
			}
			else {
				geoError();
			}
		}

		function showPosition(position) {
			if (position && position.coords) {
				updateMyLocation(position.coords.latitude, position.coords.longitude, position.coords.accuracy);
			}
			else {
				geoError();
			}
		}

		function updateMyLocation(lat, long, accuracy) {
			myLat = lat;
			myLng = long;
			myAcc = accuracy;
		}

		function getLocations() {
			locations = [
			{lat: 41.3532176, lng: -72.09621419999999, label: 'User1'},
			{lat: 41.345166, lng: -72.099453, label: 'User2'},
			{lat: 41.335166, lng: -72.099453, label: 'User3'}
			];

			return locations;
		}

		function initMap() {

			var map = new google.maps.Map(document.getElementById('map'), {
				zoom: 15,
				center: {lat: 41.340485, lng: -72.0991807}
			});

			var myImage = {
				url:'https://gotta-catch-a-ride-go.mybluemix.net/images/pedestrian-walking.png',
				size: new google.maps.Size(20,32),
				origin: new google.maps.Point(0,0),
				anchor: new google.maps.Point(0,32)
			};

			var otherImage = {
				url:'https://gotta-catch-a-ride-go.mybluemix.net/images/frontal-bus-silhouette.png',
				size: new google.maps.Size(32,32),
				origin: new google.maps.Point(0,0),
				anchor: new google.maps.Point(0,32)
			};

	        var locations = getLocations();

	        var myMarker = new google.maps.Marker({
	        	position: {lat: myLat, lng: myLng},
	        	label: 'Me!',
	        	icon: myImage,
	        });

	        // Add some markers to the map.
	        // Note: The code uses the JavaScript Array.prototype.map() method to
	        // create an array of markers based on a given "locations" array.
	        // The map() method here has nothing to do with the Google Maps API.
	        var markers = locations.map(function(location, i) {
	        	return new google.maps.Marker({
	        		position: {lat: location.lat, lng: location.lng},
	        		label: location.label,
	        		icon: otherImage,
	        	});
	        });
	        markers.push(myMarker);

	        // Add a marker clusterer to manage the markers.
	        var markerCluster = new MarkerClusterer(map, markers,
	        	{imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m'});
	    }
	</script>
	<script src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js">
	</script>
	<script async defer
	src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD2yMJAeJ7ZX_xYdgchCyXHEvcdHEuTJcc&callback=initMap">
	</script>
	<script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha256-/SIrNqv8h6QGKDuNoLGA4iret+kyesCkHGzVUUV0shc="   crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

</body>
</html>