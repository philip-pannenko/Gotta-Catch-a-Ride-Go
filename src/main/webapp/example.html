<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Catch a Ride Go!</title>

	<script>
	
	var token = -1;

	
	</script>
	
	<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
	
	<script>
	
	$( window ).ready(function() {
		$.get("rest/token", function( data ) {
			token = data;
			console.log('token defined: ' + token);
			
			var payload = {}; 
			payload.latitude = 1;
			payload.longitude = 1;
			payload.accuracy = 1;
			payload.id = token;
			payload.message = 'from browser';
			
			$.ajax({
				url: 'rest/location',
				type: 'post',
				dataType: 'json',
				contentType: 'application/json',
				data: JSON.stringify(payload),
				success: function( data, textStatus, jQxhr ){
			        console.log(data);
			        
					$.get("rest/locations", function( data ) {
							console.log('locations after this browser submitted itself to server');
							console.log(JSON.stringify(data,null,' '));
					});
					
			    },
			    error: function( jqXhr, textStatus, errorThrown ){
			        console.log( errorThrown );
			    }
			});
		});
		
		$.get("rest/locations", function( data ) {
			console.log('locations prior to this browser submits data to server');
			console.log(JSON.stringify(data,null,' '));
		});
		
	});
	
	</script>
	
	
</head>
<body id="container">
	
	<h1>1</h1>
	
	
	
	
	
</body>
</html>